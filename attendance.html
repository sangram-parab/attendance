<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Attendance — Subject</title>
  <style>
    body{ font-family:Poppins,Inter,sans-serif; margin:0; padding:28px; background:#f6fbff; color:#07304f; }
    .card{ max-width:900px; margin:18px auto; background:white; padding:18px; border-radius:12px; box-shadow:0 8px 30px rgba(8,24,50,0.06); }
    h1{ margin:0 0 6px 0; font-size:20px; }
    .meta{ color:#234a6f; font-size:14px; margin-bottom:12px; }
    table{ width:100%; border-collapse:collapse; margin-top:12px; }
    th,td{ padding:10px; border-bottom:1px solid rgba(10,30,60,0.06); text-align:left; }
    .btn{ padding:10px 18px; border-radius:8px; border:none; cursor:pointer; font-weight:700; background:#2e7d32; color:#fff; margin-top:18px; display:block; margin-left:auto; margin-right:auto; }
  </style>
</head>
<body>

  <div class="card">
    <h1 id="title">Attendance</h1>
    <div class="meta" id="meta">Subject: — &nbsp; | &nbsp; Teacher: —</div>

    <table>
      <thead>
        <tr>
          <th>Roll</th>
          <th>Name</th>
          <th>Present</th>
          <th>Absent</th>
        </tr>
      </thead>
      <tbody id="studentList"></tbody>
    </table>

    <button class="btn" id="submitAttendance">Submit Attendance</button>
  </div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const subject = params.get('sub') || 'Unknown Subject';
    const teacher = params.get('teacher') || 'Unknown Teacher';

    document.getElementById('title').innerText = `${subject} — Attendance`;
    document.getElementById('meta').innerText = `Subject: ${subject}  |  Teacher: ${teacher}`;

    const students = [
      { roll:6202, name:"Sangram" },
      { roll:6203, name:"Nitesh" },
      { roll:6204, name:"Anurang" },
      { roll:6205, name:"Neeraj" },
      { roll:6206, name:"Suraj" },
      { roll:6207, name:"Yash" },
      { roll:6208, name:"Omkar" },
      { roll:6209, name:"Sujal" },
      { roll:6210, name:"Raj" },
      { roll:6211, name:"Pranjal" },
      { roll:6212, name:"Vibhor" },
      { roll:6213, name:"Gautam" },
      { roll:6214, name:"Mrunal" }
    ];

    const tbody = document.getElementById("studentList");

    students.forEach(s => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${s.roll}</td>
        <td>${s.name}</td>
        <td><input type="radio" name="att_${s.roll}" value="Present"></td>
        <td><input type="radio" name="att_${s.roll}" value="Absent"></td>
      `;
      tbody.appendChild(row);
    });

    document.getElementById("submitAttendance").onclick = () => {
      const today = new Date().toLocaleDateString('en-IN');
      const key = `attendance::${subject}::${today}`;
      const records = [];

      students.forEach(s => {
        const selected = document.querySelector(`input[name=att_${s.roll}]:checked`);
        if(selected){
          records.push({ roll:s.roll, name:s.name, subject, teacher, date:today, status:selected.value });
        }
      });

      localStorage.setItem(key, JSON.stringify(records));
      alert("Attendance saved.");
    };
  </script>
</body>
</html>
